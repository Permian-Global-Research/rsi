<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="These functions retrieve raster data from STAC endpoints and optionally
create composite data sets from multiple files.
get_stac_data() is a generic function which should be able to download
raster data from a variety of data sources, while the other helper functions
have useful defaults for downloading common data sets from standard
STAC sources."><title>Retrieve raster data from STAC endpoints — get_stac_data • rsi</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Libre_Franklin-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve raster data from STAC endpoints — get_stac_data"><meta property="og:description" content="These functions retrieve raster data from STAC endpoints and optionally
create composite data sets from multiple files.
get_stac_data() is a generic function which should be able to download
raster data from a variety of data sources, while the other helper functions
have useful defaults for downloading common data sets from standard
STAC sources."><meta property="og:image" content="https://permian-global-research.github.io/rsi/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rsi</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/rsi.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Downloading-data-from-STAC-APIs-using-rsi.html">Downloading data from STAC APIs using rsi</a>
    <a class="dropdown-item" href="../articles/How-can-I-.html">How can I...?</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Permian-Global-Research/rsi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Retrieve raster data from STAC endpoints</h1>
      <small class="dont-index">Source: <a href="https://github.com/Permian-Global-Research/rsi/blob/HEAD/R/get_stac_data.R" class="external-link"><code>R/get_stac_data.R</code></a></small>
      <div class="d-none name"><code>get_stac_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions retrieve raster data from STAC endpoints and optionally
create composite data sets from multiple files.
<code>get_stac_data()</code> is a generic function which should be able to download
raster data from a variety of data sources, while the other helper functions
have useful defaults for downloading common data sets from standard
STAC sources.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_stac_data</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  <span class="va">start_date</span>,</span>
<span>  <span class="va">end_date</span>,</span>
<span>  pixel_x_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pixel_y_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">asset_names</span>,</span>
<span>  <span class="va">stac_source</span>,</span>
<span>  <span class="va">collection</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  query_function <span class="op">=</span> <span class="va">rsi_query_api</span>,</span>
<span>  download_function <span class="op">=</span> <span class="va">rsi_download_rasters</span>,</span>
<span>  sign_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rescale_bands <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  item_filter_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_band <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">proceduralnames</span><span class="fu">::</span><span class="fu"><a href="https://mikemahoney218.github.io/proceduralnames/reference/make_english_names.html" class="external-link">make_english_names</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span>,</span>
<span>  composite_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"merge"</span>, <span class="st">"median"</span>, <span class="st">"mean"</span>, <span class="st">"sum"</span>, <span class="st">"min"</span>, <span class="st">"max"</span><span class="op">)</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  gdalwarp_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-r"</span>, <span class="st">"bilinear"</span>, <span class="st">"-multi"</span>, <span class="st">"-overwrite"</span>, <span class="st">"-co"</span>,</span>
<span>    <span class="st">"COMPRESS=DEFLATE"</span>, <span class="st">"-co"</span>, <span class="st">"PREDICTOR=2"</span>, <span class="st">"-co"</span>, <span class="st">"NUM_THREADS=ALL_CPUS"</span><span class="op">)</span>,</span>
<span>  gdal_config_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>VSI_CACHE <span class="op">=</span> <span class="st">"TRUE"</span>, GDAL_CACHEMAX <span class="op">=</span> <span class="st">"30%"</span>, VSI_CACHE_SIZE <span class="op">=</span></span>
<span>    <span class="st">"10000000"</span>, GDAL_HTTP_MULTIPLEX <span class="op">=</span> <span class="st">"YES"</span>, GDAL_INGESTED_BYTES_AT_OPEN <span class="op">=</span> <span class="st">"32000"</span>,</span>
<span>    GDAL_DISABLE_READDIR_ON_OPEN <span class="op">=</span> <span class="st">"EMPTY_DIR"</span>, GDAL_HTTP_VERSION <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>    GDAL_HTTP_MERGE_CONSECUTIVE_RANGES <span class="op">=</span> <span class="st">"YES"</span>, GDAL_NUM_THREADS <span class="op">=</span> <span class="st">"ALL_CPUS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_sentinel1_imagery</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  <span class="va">start_date</span>,</span>
<span>  <span class="va">end_date</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  pixel_x_size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  pixel_y_size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  asset_names <span class="op">=</span> <span class="fu">rsi</span><span class="fu">::</span><span class="va"><a href="sentinel1_band_mapping.html">sentinel1_band_mapping</a></span><span class="op">$</span><span class="va">planetary_computer_v1</span>,</span>
<span>  stac_source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"stac_source"</span><span class="op">)</span>,</span>
<span>  collection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"collection_name"</span><span class="op">)</span>,</span>
<span>  query_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"query_function"</span><span class="op">)</span>,</span>
<span>  download_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"download_function"</span><span class="op">)</span>,</span>
<span>  sign_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"sign_function"</span><span class="op">)</span>,</span>
<span>  rescale_bands <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  item_filter_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_band <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">proceduralnames</span><span class="fu">::</span><span class="fu"><a href="https://mikemahoney218.github.io/proceduralnames/reference/make_english_names.html" class="external-link">make_english_names</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span>,</span>
<span>  composite_function <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  gdalwarp_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-r"</span>, <span class="st">"bilinear"</span>, <span class="st">"-multi"</span>, <span class="st">"-overwrite"</span>, <span class="st">"-co"</span>,</span>
<span>    <span class="st">"COMPRESS=DEFLATE"</span>, <span class="st">"-co"</span>, <span class="st">"PREDICTOR=2"</span>, <span class="st">"-co"</span>, <span class="st">"NUM_THREADS=ALL_CPUS"</span><span class="op">)</span>,</span>
<span>  gdal_config_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>VSI_CACHE <span class="op">=</span> <span class="st">"TRUE"</span>, GDAL_CACHEMAX <span class="op">=</span> <span class="st">"30%"</span>, VSI_CACHE_SIZE <span class="op">=</span></span>
<span>    <span class="st">"10000000"</span>, GDAL_HTTP_MULTIPLEX <span class="op">=</span> <span class="st">"YES"</span>, GDAL_INGESTED_BYTES_AT_OPEN <span class="op">=</span> <span class="st">"32000"</span>,</span>
<span>    GDAL_DISABLE_READDIR_ON_OPEN <span class="op">=</span> <span class="st">"EMPTY_DIR"</span>, GDAL_HTTP_VERSION <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>    GDAL_HTTP_MERGE_CONSECUTIVE_RANGES <span class="op">=</span> <span class="st">"YES"</span>, GDAL_NUM_THREADS <span class="op">=</span> <span class="st">"ALL_CPUS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_sentinel2_imagery</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  <span class="va">start_date</span>,</span>
<span>  <span class="va">end_date</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  pixel_x_size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  pixel_y_size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  asset_names <span class="op">=</span> <span class="fu">rsi</span><span class="fu">::</span><span class="va"><a href="sentinel2_band_mapping.html">sentinel2_band_mapping</a></span><span class="op">$</span><span class="va">planetary_computer_v1</span>,</span>
<span>  stac_source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"stac_source"</span><span class="op">)</span>,</span>
<span>  collection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"collection_name"</span><span class="op">)</span>,</span>
<span>  query_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"query_function"</span><span class="op">)</span>,</span>
<span>  download_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"download_function"</span><span class="op">)</span>,</span>
<span>  sign_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"sign_function"</span><span class="op">)</span>,</span>
<span>  rescale_bands <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  item_filter_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"mask_band"</span><span class="op">)</span>,</span>
<span>  mask_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"mask_function"</span><span class="op">)</span>,</span>
<span>  output_filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">proceduralnames</span><span class="fu">::</span><span class="fu"><a href="https://mikemahoney218.github.io/proceduralnames/reference/make_english_names.html" class="external-link">make_english_names</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span>,</span>
<span>  composite_function <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  gdalwarp_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-r"</span>, <span class="st">"bilinear"</span>, <span class="st">"-multi"</span>, <span class="st">"-overwrite"</span>, <span class="st">"-co"</span>,</span>
<span>    <span class="st">"COMPRESS=DEFLATE"</span>, <span class="st">"-co"</span>, <span class="st">"PREDICTOR=2"</span>, <span class="st">"-co"</span>, <span class="st">"NUM_THREADS=ALL_CPUS"</span><span class="op">)</span>,</span>
<span>  gdal_config_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>VSI_CACHE <span class="op">=</span> <span class="st">"TRUE"</span>, GDAL_CACHEMAX <span class="op">=</span> <span class="st">"30%"</span>, VSI_CACHE_SIZE <span class="op">=</span></span>
<span>    <span class="st">"10000000"</span>, GDAL_HTTP_MULTIPLEX <span class="op">=</span> <span class="st">"YES"</span>, GDAL_INGESTED_BYTES_AT_OPEN <span class="op">=</span> <span class="st">"32000"</span>,</span>
<span>    GDAL_DISABLE_READDIR_ON_OPEN <span class="op">=</span> <span class="st">"EMPTY_DIR"</span>, GDAL_HTTP_VERSION <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>    GDAL_HTTP_MERGE_CONSECUTIVE_RANGES <span class="op">=</span> <span class="st">"YES"</span>, GDAL_NUM_THREADS <span class="op">=</span> <span class="st">"ALL_CPUS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_landsat_imagery</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  <span class="va">start_date</span>,</span>
<span>  <span class="va">end_date</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  platforms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landsat-9"</span>, <span class="st">"landsat-8"</span><span class="op">)</span>,</span>
<span>  pixel_x_size <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  pixel_y_size <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  asset_names <span class="op">=</span> <span class="fu">rsi</span><span class="fu">::</span><span class="va"><a href="landsat_band_mapping.html">landsat_band_mapping</a></span><span class="op">$</span><span class="va">planetary_computer_v1</span>,</span>
<span>  stac_source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"stac_source"</span><span class="op">)</span>,</span>
<span>  collection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"collection_name"</span><span class="op">)</span>,</span>
<span>  query_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"query_function"</span><span class="op">)</span>,</span>
<span>  download_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"download_function"</span><span class="op">)</span>,</span>
<span>  sign_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"sign_function"</span><span class="op">)</span>,</span>
<span>  rescale_bands <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  item_filter_function <span class="op">=</span> <span class="va">landsat_platform_filter</span>,</span>
<span>  mask_band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"mask_band"</span><span class="op">)</span>,</span>
<span>  mask_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"mask_function"</span><span class="op">)</span>,</span>
<span>  output_filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">proceduralnames</span><span class="fu">::</span><span class="fu"><a href="https://mikemahoney218.github.io/proceduralnames/reference/make_english_names.html" class="external-link">make_english_names</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span>,</span>
<span>  composite_function <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  gdalwarp_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-r"</span>, <span class="st">"bilinear"</span>, <span class="st">"-multi"</span>, <span class="st">"-overwrite"</span>, <span class="st">"-co"</span>,</span>
<span>    <span class="st">"COMPRESS=DEFLATE"</span>, <span class="st">"-co"</span>, <span class="st">"PREDICTOR=2"</span>, <span class="st">"-co"</span>, <span class="st">"NUM_THREADS=ALL_CPUS"</span><span class="op">)</span>,</span>
<span>  gdal_config_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>VSI_CACHE <span class="op">=</span> <span class="st">"TRUE"</span>, GDAL_CACHEMAX <span class="op">=</span> <span class="st">"30%"</span>, VSI_CACHE_SIZE <span class="op">=</span></span>
<span>    <span class="st">"10000000"</span>, GDAL_HTTP_MULTIPLEX <span class="op">=</span> <span class="st">"YES"</span>, GDAL_INGESTED_BYTES_AT_OPEN <span class="op">=</span> <span class="st">"32000"</span>,</span>
<span>    GDAL_DISABLE_READDIR_ON_OPEN <span class="op">=</span> <span class="st">"EMPTY_DIR"</span>, GDAL_HTTP_VERSION <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>    GDAL_HTTP_MERGE_CONSECUTIVE_RANGES <span class="op">=</span> <span class="st">"YES"</span>, GDAL_NUM_THREADS <span class="op">=</span> <span class="st">"ALL_CPUS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_naip_imagery</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  <span class="va">start_date</span>,</span>
<span>  <span class="va">end_date</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  pixel_x_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pixel_y_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  asset_names <span class="op">=</span> <span class="st">"image"</span>,</span>
<span>  stac_source <span class="op">=</span> <span class="st">"https://planetarycomputer.microsoft.com/api/stac/v1"</span>,</span>
<span>  collection <span class="op">=</span> <span class="st">"naip"</span>,</span>
<span>  query_function <span class="op">=</span> <span class="va">rsi_query_api</span>,</span>
<span>  download_function <span class="op">=</span> <span class="va">rsi_download_rasters</span>,</span>
<span>  sign_function <span class="op">=</span> <span class="va">sign_planetary_computer</span>,</span>
<span>  rescale_bands <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  output_filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">proceduralnames</span><span class="fu">::</span><span class="fu"><a href="https://mikemahoney218.github.io/proceduralnames/reference/make_english_names.html" class="external-link">make_english_names</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span>,</span>
<span>  composite_function <span class="op">=</span> <span class="st">"merge"</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  gdalwarp_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-r"</span>, <span class="st">"bilinear"</span>, <span class="st">"-multi"</span>, <span class="st">"-overwrite"</span>, <span class="st">"-co"</span>,</span>
<span>    <span class="st">"COMPRESS=DEFLATE"</span>, <span class="st">"-co"</span>, <span class="st">"PREDICTOR=2"</span>, <span class="st">"-co"</span>, <span class="st">"NUM_THREADS=ALL_CPUS"</span><span class="op">)</span>,</span>
<span>  gdal_config_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>VSI_CACHE <span class="op">=</span> <span class="st">"TRUE"</span>, GDAL_CACHEMAX <span class="op">=</span> <span class="st">"30%"</span>, VSI_CACHE_SIZE <span class="op">=</span></span>
<span>    <span class="st">"10000000"</span>, GDAL_HTTP_MULTIPLEX <span class="op">=</span> <span class="st">"YES"</span>, GDAL_INGESTED_BYTES_AT_OPEN <span class="op">=</span> <span class="st">"32000"</span>,</span>
<span>    GDAL_DISABLE_READDIR_ON_OPEN <span class="op">=</span> <span class="st">"EMPTY_DIR"</span>, GDAL_HTTP_VERSION <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>    GDAL_HTTP_MERGE_CONSECUTIVE_RANGES <span class="op">=</span> <span class="st">"YES"</span>, GDAL_NUM_THREADS <span class="op">=</span> <span class="st">"ALL_CPUS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_alos_palsar_imagery</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  <span class="va">start_date</span>,</span>
<span>  <span class="va">end_date</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  pixel_x_size <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  pixel_y_size <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  asset_names <span class="op">=</span> <span class="fu">rsi</span><span class="fu">::</span><span class="va"><a href="alos_palsar_band_mapping.html">alos_palsar_band_mapping</a></span><span class="op">$</span><span class="va">planetary_computer_v1</span>,</span>
<span>  stac_source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"stac_source"</span><span class="op">)</span>,</span>
<span>  collection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"collection_name"</span><span class="op">)</span>,</span>
<span>  query_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"query_function"</span><span class="op">)</span>,</span>
<span>  download_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"download_function"</span><span class="op">)</span>,</span>
<span>  sign_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"sign_function"</span><span class="op">)</span>,</span>
<span>  rescale_bands <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  item_filter_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"mask_band"</span><span class="op">)</span>,</span>
<span>  mask_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"mask_function"</span><span class="op">)</span>,</span>
<span>  output_filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">proceduralnames</span><span class="fu">::</span><span class="fu"><a href="https://mikemahoney218.github.io/proceduralnames/reference/make_english_names.html" class="external-link">make_english_names</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span>,</span>
<span>  composite_function <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  gdalwarp_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-r"</span>, <span class="st">"bilinear"</span>, <span class="st">"-multi"</span>, <span class="st">"-overwrite"</span>, <span class="st">"-co"</span>,</span>
<span>    <span class="st">"COMPRESS=DEFLATE"</span>, <span class="st">"-co"</span>, <span class="st">"PREDICTOR=2"</span>, <span class="st">"-co"</span>, <span class="st">"NUM_THREADS=ALL_CPUS"</span><span class="op">)</span>,</span>
<span>  gdal_config_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>VSI_CACHE <span class="op">=</span> <span class="st">"TRUE"</span>, GDAL_CACHEMAX <span class="op">=</span> <span class="st">"30%"</span>, VSI_CACHE_SIZE <span class="op">=</span></span>
<span>    <span class="st">"10000000"</span>, GDAL_HTTP_MULTIPLEX <span class="op">=</span> <span class="st">"YES"</span>, GDAL_INGESTED_BYTES_AT_OPEN <span class="op">=</span> <span class="st">"32000"</span>,</span>
<span>    GDAL_DISABLE_READDIR_ON_OPEN <span class="op">=</span> <span class="st">"EMPTY_DIR"</span>, GDAL_HTTP_VERSION <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>    GDAL_HTTP_MERGE_CONSECUTIVE_RANGES <span class="op">=</span> <span class="st">"YES"</span>, GDAL_NUM_THREADS <span class="op">=</span> <span class="st">"ALL_CPUS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_dem</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  start_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pixel_x_size <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  pixel_y_size <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  asset_names <span class="op">=</span> <span class="fu">rsi</span><span class="fu">::</span><span class="va"><a href="dem_band_mapping.html">dem_band_mapping</a></span><span class="op">$</span><span class="va">planetary_computer_v1</span><span class="op">$</span><span class="va">`cop-dem-glo-30`</span>,</span>
<span>  stac_source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"stac_source"</span><span class="op">)</span>,</span>
<span>  collection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"collection_name"</span><span class="op">)</span>,</span>
<span>  query_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"query_function"</span><span class="op">)</span>,</span>
<span>  download_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"download_function"</span><span class="op">)</span>,</span>
<span>  sign_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">asset_names</span>, <span class="st">"sign_function"</span><span class="op">)</span>,</span>
<span>  rescale_bands <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  item_filter_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_band <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">proceduralnames</span><span class="fu">::</span><span class="fu"><a href="https://mikemahoney218.github.io/proceduralnames/reference/make_english_names.html" class="external-link">make_english_names</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span>,</span>
<span>  composite_function <span class="op">=</span> <span class="st">"max"</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  gdalwarp_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-r"</span>, <span class="st">"bilinear"</span>, <span class="st">"-multi"</span>, <span class="st">"-overwrite"</span>, <span class="st">"-co"</span>,</span>
<span>    <span class="st">"COMPRESS=DEFLATE"</span>, <span class="st">"-co"</span>, <span class="st">"PREDICTOR=2"</span>, <span class="st">"-co"</span>, <span class="st">"NUM_THREADS=ALL_CPUS"</span><span class="op">)</span>,</span>
<span>  gdal_config_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>VSI_CACHE <span class="op">=</span> <span class="st">"TRUE"</span>, GDAL_CACHEMAX <span class="op">=</span> <span class="st">"30%"</span>, VSI_CACHE_SIZE <span class="op">=</span></span>
<span>    <span class="st">"10000000"</span>, GDAL_HTTP_MULTIPLEX <span class="op">=</span> <span class="st">"YES"</span>, GDAL_INGESTED_BYTES_AT_OPEN <span class="op">=</span> <span class="st">"32000"</span>,</span>
<span>    GDAL_DISABLE_READDIR_ON_OPEN <span class="op">=</span> <span class="st">"EMPTY_DIR"</span>, GDAL_HTTP_VERSION <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>    GDAL_HTTP_MERGE_CONSECUTIVE_RANGES <span class="op">=</span> <span class="st">"YES"</span>, GDAL_NUM_THREADS <span class="op">=</span> <span class="st">"ALL_CPUS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>aoi</dt>
<dd><p>An sf(c) object outlining the area of interest to get imagery for.
Will be used to get the bounding box used for calculating metrics and the
output data's CRS.</p></dd>


<dt>start_date, end_date</dt>
<dd><p>Character of length 1: The first and last date,
respectively, of imagery to include in metrics calculations. Should be in
YYYY-MM-DD format.</p></dd>


<dt>pixel_x_size, pixel_y_size</dt>
<dd><p>Numeric of length 1: size of pixels in
x-direction (longitude / easting) and y-direction (latitude / northing).</p></dd>


<dt>asset_names</dt>
<dd><p>The names of the assets to download. If this vector has
names, then the names of the vector are assumed to be the names of assets on
the STAC server, which will be renamed to the elements of the vector in the
final output.</p></dd>


<dt>stac_source</dt>
<dd><p>Character of length 1: the STAC URL to download
imagery from.</p></dd>


<dt>collection</dt>
<dd><p>Character of length 1: the STAC collection to download
images from.</p></dd>


<dt>...</dt>
<dd><p>Passed to <code>item_filter_function</code>.</p></dd>


<dt>query_function</dt>
<dd><p>A function that takes the output from
<code><a href="https://brazil-data-cube.github.io/rstac/reference/stac_search.html" class="external-link">rstac::stac_search()</a></code> and executes the request. See
<code><a href="rsi_query_api.html">rsi_query_api()</a></code> and the <code>query_function</code> slots of
<a href="sentinel1_band_mapping.html">sentinel1_band_mapping</a>, <a href="sentinel2_band_mapping.html">sentinel2_band_mapping</a>, and
<a href="landsat_band_mapping.html">landsat_band_mapping</a>.</p></dd>


<dt>download_function</dt>
<dd><p>A function that takes the output from
<code>query_function</code> and downloads the assets attached to those items. See
<code><a href="rsi_download_rasters.html">rsi_download_rasters()</a></code> for an example.</p></dd>


<dt>sign_function</dt>
<dd><p>A function that takes the output from <code>query_function</code>
and signs the item URLs, if necessary.</p></dd>


<dt>rescale_bands</dt>
<dd><p>Logical of length 1: If the STAC collection implements
the <code>raster</code> STAC extension, and that extension includes <code>scale</code> and <code>offset</code>
values, should this function attempt to automatically rescale the downloaded
data?</p></dd>


<dt>item_filter_function</dt>
<dd><p>A function that takes the outputs of
<code>query_function</code> (usually a <code>STACItemCollection</code>) and <code>...</code> and returns a
filtered <code>STACItemCollection</code>. This is used, for example, to only download
images from specific Landsat platforms.</p></dd>


<dt>mask_band</dt>
<dd><p>Character of length 1: The name of the asset in your
STAC source to use to mask the data. Set to <code>NULL</code> to not mask. See the
<code>mask_band</code> slots of <a href="sentinel1_band_mapping.html">sentinel1_band_mapping</a>, <a href="sentinel2_band_mapping.html">sentinel2_band_mapping</a>, and
<a href="landsat_band_mapping.html">landsat_band_mapping</a>.</p></dd>


<dt>mask_function</dt>
<dd><p>A function that takes a raster and returns a boolean
raster, where <code>TRUE</code> pixels will be preserved and <code>FALSE</code> or <code>NA</code> pixels will
be masked out. See <code><a href="sentinel2_mask_function.html">sentinel2_mask_function()</a></code>.</p></dd>


<dt>output_filename</dt>
<dd><p>The filename to write the output raster to. If
<code>composite_function</code> is <code>NULL</code>, item datetimes will be appended to this
in order to create unique filenames. If items do not have datetimes, a
sequential ID will be appended instead.</p></dd>


<dt>composite_function</dt>
<dd><p>Character of length 1: The name of a
function used to combine downloaded images into a single composite
(i.e., to aggregate pixel values from multiple images into a single value).
Must be one of of "sum", "mean", "median", "min", "max".
Set to <code>NULL</code> to not composite
(i.e., to rescale and save each individual file independently).</p></dd>


<dt>limit</dt>
<dd><p>an <code>integer</code> defining the maximum number of results
to return. If not informed, it defaults to the service implementation.</p></dd>


<dt>gdalwarp_options</dt>
<dd><p>Options passed to <code>gdalwarp</code> through the <code>options</code>
argument of <code><a href="https://r-spatial.github.io/sf/reference/gdal_utils.html" class="external-link">sf::gdal_utils()</a></code>. The same set of options are used for all
downloaded data and the final output images; this means that some common
options (for instance, <code>PREDICTOR=3</code>) may cause errors if bands are of
varying data types.</p></dd>


<dt>gdal_config_options</dt>
<dd><p>Options passed to <code>gdalwarp</code> through the
<code>config_options</code> argument of <code><a href="https://r-spatial.github.io/sf/reference/gdal_utils.html" class="external-link">sf::gdal_utils()</a></code>.</p></dd>


<dt>platforms</dt>
<dd><p>The names of Landsat satellites to download imagery from.
These do not correspond to the <code>platforms</code> column in <code><a href="spectral_indices.html">spectral_indices()</a></code>;
the default argument of <code>c("landsat-9", "landsat-8")</code> corresponds to
the <code>Landsat-OLI</code> value in that column.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>output_filename</code>, unchanged.</p>
    </div>
    <div class="section level2">
    <h2 id="usage-tips">Usage Tips<a class="anchor" aria-label="anchor" href="#usage-tips"></a></h2>
    

<p>It's often useful to buffer your <code>aoi</code> object slightly, on the order of 1-2
cell widths, in order to ensure that data is downloaded for your entire AOI
even after accounting for any reprojection needed to compare your AOI to
the data on the STAC server.</p>
<p>These functions allow for parallelizing downloads via <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code>, and
for user-controlled progress updates via <code><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">progressr::handlers()</a></code>. If
there are fewer images to download than <code>asset_names</code>, then this function
uses <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> to iterate through images and <code><a href="https://future.apply.futureverse.org/reference/future_mapply.html" class="external-link">future.apply::future_mapply()</a></code>
to iterate through downloading each asset. If there are more images than
assets, this function uses <code><a href="https://future.apply.futureverse.org/reference/future_lapply.html" class="external-link">future.apply::future_lapply()</a></code> to iterate through
images.</p>
    </div>
    <div class="section level2">
    <h2 id="downloading-from-planetary-computer">Downloading from Planetary Computer<a class="anchor" aria-label="anchor" href="#downloading-from-planetary-computer"></a></h2>
    


<p>Certain data sets in Planetary Computer require
<a href="https://planetarycomputer.microsoft.com/docs/concepts/sas/" class="external-link">providing a subscription key</a>.
Even for non-protected data sets, providing a subscription key grants you
higher rate limits and faster downloads. As such, it's a good idea to
<a href="https://planetarycomputer.microsoft.com/account/request" class="external-link">request a Planetary Computer account</a>,
then <a href="https://planetarycomputer.developer.azure-api.net/" class="external-link">generate a subscription key</a>.
If you set the <code>rsi_pc_key</code> environment variable to your key (either primary
or secondary; there is no difference), rsi will automatically use
this key to sign all requests against Planetary Computer.</p>
<p>There are currently some challenges with certain Landsat images in Planetary
Computer; please see
https://github.com/microsoft/PlanetaryComputer/discussions/101
for more information on these images and their current status. These files
may cause data downloads to fail.</p>
    </div>
    <div class="section level2">
    <h2 id="compositing">Compositing<a class="anchor" aria-label="anchor" href="#compositing"></a></h2>
    


<p>This function can either download all data that intersects with your
spatiotemporal AOI as multiple files (if <code>composite_function = NULL</code>),
or can be used to rescale band values, apply a mask function, and create a
composite from the resulting files in a single function call. Each of these
steps can be skipped by passing <code>NULL</code> to the corresponding argument.</p>
<p>Masks are applied to each downloaded asset separately. Rescaling is applied
to the final composite after images are combined.</p>
<p>A number of the steps involved in creating composites -- rescaling band
values, running the mask function, masking images, and compositing images --
currently rely on the <code>terra</code> package for raster calculations. This means
creating larger composites, either in geographic or temporal dimension, may
cause errors. It can be a good idea to tile your <code>aoi</code> using
<code><a href="https://r-spatial.github.io/sf/reference/st_make_grid.html" class="external-link">sf::st_make_grid()</a></code> and iterate through the tiles to avoid these errors
(and to make it easier to interrupt and restart a download job).</p>
    </div>
    <div class="section level2">
    <h2 id="rescaling">Rescaling<a class="anchor" aria-label="anchor" href="#rescaling"></a></h2>
    

<p>If <code>rescale_bands</code> is <code>TRUE</code>, then this function is able to use the <code>scale</code>
and <code>offset</code> values in the <code>bands</code> field of the <code>raster</code> STAC extension.
This was implemented originally to work with the Landsat collections in the
Planetary Computer STAC catalogue, but hopefully will work automatically with
other data sources as well. Note that Sentinel-2 data typically doesn't use
this STAC extension, and so the returned data is typically not re-scaled;
divide the downloaded band values by 10000 to get reflectance values in the
expected values.</p>
    </div>
    <div class="section level2">
    <h2 id="sentinel-data">Sentinel-1 Data<a class="anchor" aria-label="anchor" href="#sentinel-data"></a></h2>
    

<p>The <code>get_sentinel1_imagery()</code> function is designed to download Sentinel-1 data
from the Microsoft Planetary Computer STAC API. Both the GRD and RTC
Sentinel-1 collections are supported. To download RTC data,
set <code>collection</code> to <code>sentinel-1-rtc</code>, and supply your subscription key
as an environment variable named <code>rsi_pc_key</code> (through, e.g., <code><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv()</a></code>
or your <code>.Renviron</code> file).</p>
    </div>
    <div class="section level2">
    <h2 id="alos-palsar-data">AlOS PALSAR Data<a class="anchor" aria-label="anchor" href="#alos-palsar-data"></a></h2>
    

<p>The <code>get_alos_palsar_imagery()</code> function is designed to download ALOS PALSAR
annual mosaic data from the Microsoft Planetary Computer STAC API. Data are
returned as a digital number (which is appropriate for some applications
and indices). To convert to backscatter (decibels) use the following formula:
<code>10 * log10(dn) - 83.0</code> where dn is the radar band in digital number.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># interactive()</span></span></span>
<span class="r-in"><span><span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">74.912131</span>, <span class="fl">44.080410</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_set_crs</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="va">aoi</span><span class="op">)</span>, <span class="fl">4326</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoi</span>, <span class="fl">5070</span><span class="op">)</span>, <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">get_stac_data</span><span class="op">(</span><span class="va">aoi</span>,</span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="st">"2022-06-01"</span>,</span></span>
<span class="r-in"><span>  end_date <span class="op">=</span> <span class="st">"2022-06-30"</span>,</span></span>
<span class="r-in"><span>  pixel_x_size <span class="op">=</span> <span class="fl">30</span>,</span></span>
<span class="r-in"><span>  pixel_y_size <span class="op">=</span> <span class="fl">30</span>,</span></span>
<span class="r-in"><span>  asset_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"red"</span>, <span class="st">"blue"</span>, <span class="st">"green"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  stac_source <span class="op">=</span> <span class="st">"https://planetarycomputer.microsoft.com/api/stac/v1/"</span>,</span></span>
<span class="r-in"><span>  collection <span class="op">=</span> <span class="st">"landsat-c2-l2"</span>,</span></span>
<span class="r-in"><span>  query_function <span class="op">=</span> <span class="va">rsi_query_api</span>,</span></span>
<span class="r-in"><span>  sign_function <span class="op">=</span> <span class="va">sign_planetary_computer</span>,</span></span>
<span class="r-in"><span>  mask_band <span class="op">=</span> <span class="st">"qa_pixel"</span>,</span></span>
<span class="r-in"><span>  mask_function <span class="op">=</span> <span class="va">landsat_mask_function</span>,</span></span>
<span class="r-in"><span>  item_filter_function <span class="op">=</span> <span class="va">landsat_platform_filter</span>,</span></span>
<span class="r-in"><span>  platforms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landsat-9"</span>, <span class="st">"landsat-8"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or, mostly equivalently (will download more bands):</span></span></span>
<span class="r-in"><span><span class="va">landsat_image</span> <span class="op">&lt;-</span> <span class="fu">get_landsat_imagery</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">aoi</span>,</span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="st">"2022-06-01"</span>,</span></span>
<span class="r-in"><span>  end_date <span class="op">=</span> <span class="st">"2022-08-30"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://www.mm218.dev/" class="external-link">Michael Mahoney</a>, <a href="https://permianglobal.com/" class="external-link"><img src="reference/figures/permian-logo.svg" alt="Permian Global" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

